# Виртуальная лаборатория программирования

Проект виртуальной лабаротории для обучения программированию.
Структура сайта разбита на группы, курсы.
Преподаватели могут создавать свои курсы прям на сайте с использованием разметки `markdown` и писать задания с проверками на потдерживаемых языках.
Так же преподаватели могут администрировать группы студентов, добавлять и удалять их с курса, следить за их прогрессом.

Приложение ориентировано на микро сервисную архитектуру для упрощения масштабирования и изоляции пользовательского кода от ресурсов, имеющих доступ к личным данным.

В качестве инструмента контейнеризации был выбран **Docker**.
Для связи между независимыми контейнерами используется брокер сообщений **RabbitMQ**,
а для хранения пользовательских данных – СУБД **PostreSQL**.

Функционал же приложения располагается в нескольких сервисах, запускаемых в **Docker** контейнирах:
- Application 
- Csharp Runner
- Python Runner
- Compile Results Updater

Интерактивный редактор кода и подсветка синтаксиса была создана при использовании таких JavaScript решений:  
- **Prism** – библиотека используемая для токенизации кода внутри блоков `<code>` и последующей обработки для подсветки синтаксиса.
- **code-input** – JavaScript решение на основе Prizm, представляющее собой надстройку над стандартным элементом `<textarea>` для подсветки синтаксиса в нем в runtime.

Для аутентификация и авторизации пользователей использовано расширение для ASP.NET Core – **Identity**.

#####  CSharp Compiler и Python Compiler
– эти сервисы исполняют роль песочницы пользовательского кода.
Когда пользователь решает отправить код на исполнение **application** создаёт экземпляр `CompileRequest`, структуры содержащей информацию о  запросе на компиляцию. 
После этого  **application** создает в брокере сообщений запрос на исполнение, включая туда свой уникальный `guid` идентификатор. 

##### Развёртка приложения
Использование технологии контейнеризации Docker и инструмента для определения и запуска многоконтейнерных приложений Docker Compose, значительно упрощает процесс развертывания приложения на удаленной инфраструктуре. 

Все сервисы и элементы создаются в отдельных контейнерах (`application, rabbit, database, compile-results-updater-service, csharp-compiler-service, python-compiler-service`) между ними создаются виртуальные сети для их взаимодействия (`rabbit-network`  и `db-network`), так же для сервисов, хранящих постоянные данные, создаются постоянные хранилища (`rabbit-data` и `database-data`).

### Todo
- [X] Add timeout for solution project
- [X] Mange modals by JsInterop [source](https://stackoverflow.com/questions/77453833/bootstrap-modal-on-blazor-stopped-working-on-net-8-rc2-using-jsinterop-to-open)
- [ ] Make services more independent from input data structures, more restfull...
- [ ] Write own simple framework for tests...
- [ ] Rewrite services with [attach method](https://metanit.com/sharp/entityframework/1.3.php)
